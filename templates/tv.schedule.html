{% extends "_content.html" %}

{% block title %}
Trova - TV Setup
{% endblock %}

{% block page_title %}
TV Schedule
{% endblock %}

{% block page_buttons %}

{% endblock %}

{% block page_content %}
{% load widget_tweaks %}

<!-- Main page content -->

{% if sonarr.success %}
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Schedule</h3>
    </div>
    <div class="panel-body">
        <table id="schedule" class="display" width="100%"></table>
    </div>
</div>

{% else %}
    Connection Failed
{% endif %}



<!-- End of main page content-->
<script>
    $(document).ready(function() {
        var scheduleData = JSON.parse('{{ sonarr.data | escapejs }}');
        console.log(scheduleData);

        var dataSet = [];
        scheduleData.forEach(function(element){
            var episodeData = [];
            episodeData.push(element.series.title);
            episodeData.push(element.title);
            episodeData.push(element.airDate);
            dataSet.push(episodeData);
        });
       
        $('#schedule').DataTable( {
            data: dataSet,
            columns: [
                { title: "Series" },
                { title: "Epsiode" },
                { title: "Air Date" },
            ],
            order: [[ 2, "asc" ]]
        } );
    } );
</script>
{% endblock %}